package org.repaire.mapper;

import java.util.List;
import org.apache.ibatis.annotations.Delete;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.ResultMap;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.annotations.Update;
import org.repaire.pojo.Repaireapp;
import org.repaire.pojo.RepaireappExample;
import org.repaire.pojo.RepaireappUnion;

public interface RepaireappMapper {
    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int countByExample(RepaireappExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int deleteByExample(RepaireappExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    @Delete({
        "delete from repaireapp",
        "where repairAppId = #{repairAppId,jdbcType=VARCHAR}"
    })
    int deleteByPrimaryKey(String repairAppId);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    @Insert({
        "insert into repaireapp (repairAppId, repairAppTime, ",
        "repairAppDormId, repairAppStuId, ",
        "repairAppStuName, repairAppStuTel, ",
        "repairAppType, repairAppReason, ",
        "repairAppReasonImg, repairAppState, ",
        "repairman, repairEvaluId, ",
        "repairOpenId)",
        "values (#{repairAppId,jdbcType=VARCHAR}, #{repairAppTime,jdbcType=TIMESTAMP}, ",
        "#{repairAppDormId,jdbcType=VARCHAR}, #{repairAppStuId,jdbcType=VARCHAR}, ",
        "#{repairAppStuName,jdbcType=VARCHAR}, #{repairAppStuTel,jdbcType=VARCHAR}, ",
        "#{repairAppType,jdbcType=VARCHAR}, #{repairAppReason,jdbcType=VARCHAR}, ",
        "#{repairAppReasonImg,jdbcType=VARCHAR}, #{repairAppState,jdbcType=INTEGER}, ",
        "#{repairman,jdbcType=VARCHAR}, #{repairEvaluId,jdbcType=VARCHAR}, ",
        "#{repairOpenId,jdbcType=VARCHAR})"
    })
    int insert(Repaireapp record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int insertSelective(Repaireapp record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    List<Repaireapp> selectByExample(RepaireappExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    @Select({
        "select",
        "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
        "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
        "repairman, repairEvaluId, repairOpenId",
        "from repaireapp",
        "where repairAppId = #{repairAppId,jdbcType=VARCHAR} order by repairAppTime desc"
    })
    @ResultMap("BaseResultMap")
    Repaireapp selectByPrimaryKey(String repairAppId);

    @Select({
            "select * from",
            "(select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName,",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState,",
            "rapp.repairEvaluId,eva.repairEvaluRank,eva.repairEvaluContent,eva.repairEvaluTime,repairOpenId,realName as repairmanName,phoneNum as repairmanTel ",
            "from repaireapp as rapp",
            "left join userinfo on openId = repairman",
            "left join repaireevalu as eva on rapp.repairEvaluId = eva.repairEvaluId",
            ")as b",
            "where b.repairAppId = #{repairAppId,jdbcType=VARCHAR} order by repairAppTime desc"
    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectByPrimaryKeyUnion(String repairAppId);


    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel ",
            "from repaireapp left join userinfo ",
            "on openId = repairman ",
            "where repairAppState = #{1,jdbcType=INTEGER} ",
            "and repairOpenId = #{0,jdbcType=VARCHAR} order by repairAppTime desc"

    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectRepaireAppByOpenIdAndStateUnion(String openid,int state);

    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel ",
            "from repaireapp left join userinfo ",
            "on openId = repairman ",
            "where repairAppState = #{1,jdbcType=INTEGER} ",
            "and repairman = #{0,jdbcType=VARCHAR} order by repairAppTime desc"

    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectRepaireAppByRepairmanAndStateUnion(String repairman,int state);

    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel ",
            "from repaireapp left join userinfo ",
            "on openId = repairman ",
            "where repairman = #{0,jdbcType=VARCHAR} order by repairAppTime desc"

    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectRepaireAppByRepairmanUnion(String repairman);

    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel ",
            "from repaireapp left join userinfo ",
            "on openId = repairman ",
            "where repairAppState < 2 ",
            "and repairAppTime < date_sub(now(), interval 7 day) order by repairAppTime desc",


    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectSuspendingRepairAppUnion();

    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel",
            "from repaireapp left join userinfo",
            "on openId = repairman",
            "where repairAppState = #{0,jdbcType=INTEGER} order by repairAppTime desc"
    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectRepaireAppByStateUnion(int state);

    @Select({
            "select",
            "repairAppId, repairAppTime, repairAppDormId, repairAppStuId, repairAppStuName, ",
            "repairAppStuTel, repairAppType, repairAppReason, repairAppReasonImg, repairAppState, ",
            "repairEvaluId, repairOpenId,realName as repairmanName,phoneNum as repairmanTel",
            "from repaireapp left join userinfo",
            "on openId = repairman",
            "where repairOpenId = #{0,jdbcType=VARCHAR} order by repairAppTime desc"
    })
    @ResultMap("ResultMap2")
    List<RepaireappUnion> selectRepairAppByOepnIdUnion(String openid);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int updateByExampleSelective(@Param("record") Repaireapp record, @Param("example") RepaireappExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int updateByExample(@Param("record") Repaireapp record, @Param("example") RepaireappExample example);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    int updateByPrimaryKeySelective(Repaireapp record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table repaireapp
     *
     * @mbggenerated
     */
    @Update({
        "update repaireapp",
        "set repairAppTime = #{repairAppTime,jdbcType=TIMESTAMP},",
          "repairAppDormId = #{repairAppDormId,jdbcType=VARCHAR},",
          "repairAppStuId = #{repairAppStuId,jdbcType=VARCHAR},",
          "repairAppStuName = #{repairAppStuName,jdbcType=VARCHAR},",
          "repairAppStuTel = #{repairAppStuTel,jdbcType=VARCHAR},",
          "repairAppType = #{repairAppType,jdbcType=VARCHAR},",
          "repairAppReason = #{repairAppReason,jdbcType=VARCHAR},",
          "repairAppReasonImg = #{repairAppReasonImg,jdbcType=VARCHAR},",
          "repairAppState = #{repairAppState,jdbcType=INTEGER},",
          "repairman = #{repairman,jdbcType=VARCHAR},",
          "repairEvaluId = #{repairEvaluId,jdbcType=VARCHAR},",
          "repairOpenId = #{repairOpenId,jdbcType=VARCHAR}",
        "where repairAppId = #{repairAppId,jdbcType=VARCHAR}"
    })
    int updateByPrimaryKey(Repaireapp record);
}